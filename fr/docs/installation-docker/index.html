<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Installation avec Docker - Photoview Documentation</title><link rel="stylesheet" href="/main.css"><link rel="stylesheet" href="/docs/style.css"><link href="/docs/syntax-theme.css" rel="stylesheet"><script defer="defer" data-domain="photoview.github.io" src="https://analytics.qpqp.dk/js/plausible.outbound-links.js"></script><script>window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }</script></head><body><div class="mx-4 relative"><div class="max-w-screen-2xl m-auto flex items-start min-h-screen"><aside class="w-56 sticky top-0 docs-nav flex-shrink-0"><div class="overflow-y-auto max-h-screen pr-4"><a href="/"><img class="my-8" src="/images/logo-large.svg" alt="Photoview logo" height="60"> </a><input id="nav-search-field" type="search" placeholder="Search" class="pointer mb-4 w-full py-2 px-3 text-sm border border-gray-200 rounded-md"><nav class="mb-8"><ul><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/">Introduction</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/getting-started/">Démarrer</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/faq/">FAQ</a></li><li class=""><span class="ml-3 mt-6 block uppercase text-gray-600 font-bold text-xs tracking-wider">Installation</span><ul><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm bg-blue-50 text-primaryDark hover:text-primaryDark" href="/fr/docs/installation-docker/" aria-current="page">Installation avec Docker</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/installation-manual/">Installation manuelle</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/installation-systemd/">Utilisation avec systemd</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/installation-environment-variables/">Variables d&#39;environnement</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/installation-reverse-proxies/">Reverse Proxy</a></li></ul></li><li class=""><span class="ml-3 mt-6 block uppercase text-gray-600 font-bold text-xs tracking-wider">Utilisation</span><ul><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/usage-basic-overview/">Utilisation basique</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/usage-nextcloud/">Utilisation avec Nextcloud</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/usage-people/">Reconnaissance faciale</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/usage-places/">Lieux</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/usage-scanner/">Analyseur (scanneur) de fichiers</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/usage-settings/">Page des paramètres</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/usage-sharing/">Partage des albums et des médias</a></li></ul></li><li class=""><span class="ml-3 mt-6 block uppercase text-gray-600 font-bold text-xs tracking-wider">Contribuer</span><ul><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/contribute-how-to/">Comment contribuer</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/contribute-feature-request/">Signaler des bugs</a></li><li><a class="px-3 py-1 block no-underline hover:no-underline text-sm text-black hover:text-gray-900 hover:bg-gray-100" href="/fr/docs/contribute-setup-locally/">Mettre en place l&#39;environnement de développement</a></li></ul></li></ul></nav></div></aside><style>.docs-nav::before {
        content: '';
        background-color: rgb(249, 250, 251);
        position: absolute;
        z-index: -1;
        top: 0;
        right: 0;
        width: 100vw;
        height: 100vh;
      }</style><aside id="content-toc" class="w-48 sticky docs-toc order-3 flex-shrink-0"><span class="block uppercase text-gray-600 font-bold text-xs tracking-wider pt-0">Contents</span><nav class="toc"><ol><li><a href="#installation-avec-docker-compose">Installation avec Docker Compose</a><ol><li><a href="#configurer-le-fichier-docker-compose.yml">Configurer le fichier docker-compose.yml</a><ol><li><a href="#port">Port</a></li><li><a href="#variables-d'environment">Variables d'environment</a></li><li><a href="#volumes">Volumes</a></li></ol></li><li><a href="#lancer-docker-compose.yml">Lancer docker-compose.yml</a></li></ol></li><li><a href="#docker-tags-et-versioning">Docker tags et versioning</a></li><li><a href="#mise-%C3%A0-jour">Mise à jour</a></li></ol></nav></aside><main id="primary-content" class="mb-40 w-full px-14 py-14"><header class="flex justify-between items-center"><h1>Installation avec Docker</h1><div class="flex items-center"><a title="Edit on GitHub" class="text-gray-500 hover:text-primaryDark no-underline" href="https://github.com/photoview/photoview.github.io/edit/master/./src/fr/docs/installation-docker.md"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-3"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg> </a><select class="ml-5" id="lg-switcher" onchange="changeLanguage()"><option class="lg-switcher-item" value="/en/docs/installation-docker/">English</option><option class="lg-switcher-item" selected="selected" value="/fr/docs/installation-docker/">Français</option></select><script>function changeLanguage() {
      document.location.href=document.getElementById("lg-switcher").value;
    }</script></div></header><p>De loin la solution la plus facile et rapide pour installer Photoview est l'utilisation d'un container Docker. Avec Docker, toutes les dépendances sont automatiquement installées et tout est prêt à être utilisé. Si vous démarrez avec Docker et souhaitez en apprendre plus, vous pouvez vous référer à cet <a href="https://www.freecodecamp.org/news/docker-simplified-96639a35ff36/">article par FreeCodeCamp</a>.</p><p>Pour organiser au mieux les containers Docker, un outil appelé <a href="https://docs.docker.com/compose/">Docker Compose</a> est utilisé. Il vous permet de configurer les containers dans un fichier <code>yaml</code>, et démarrer rapidement tous les containers configurés en une seule commande. Bien que cet outil ne puisse rien faire que vous ne puissiez déjà faire avec Docker seul, il simplifie le processus.</p><h2 id="installation-avec-docker-compose" tabindex="-1"><a class="header-anchor" href="#installation-avec-docker-compose" aria-label="Anchor"></a> Installation avec Docker Compose</h2><blockquote><p>Prérequis : Docker Engine et Docker Compose doivent être installés sur votre serveur. Voir <a href="https://docs.docker.com/engine/install/">Install Docker Engine</a> et <a href="https://docs.docker.com/compose/install/">Install Docker Compose</a> pour savoir comment les installer.</p></blockquote><p>Pour configurer Photoview avec Docker Compose, commencez par copier le contenu soit du fichier <a href="https://github.com/photoview/photoview/blob/master/docker-compose%20example/docker-compose.example.yml">docker-compose.example.yml</a>, soit du fichier <a href="https://github.com/photoview/photoview/blob/master/docker-compose%20example/docker-compose.minimal.example.yml">docker-compose.minimal.example.yml</a>, et enregistrez-le dans un fichier nommé docker-compose.yml. La version minimale utilise MariaDB, tandis que l'exemple complet inclut également des conteneurs Postgres et Watchtower commentés.</p><p>Dans ce fichier vous trouverez deux services : le serveur Photoview, appelé <code>photoview</code> et une base de données MariaDB database appelée <code>db</code>. Le service Photoview est déjà configuré avec la base de données.</p><h3 id="configurer-le-fichier-docker-compose.yml" tabindex="-1"><a class="header-anchor" href="#configurer-le-fichier-docker-compose.yml" aria-label="Anchor"></a> Configurer le fichier docker-compose.yml</h3><p>Le fichier compose est prévu pour fonctionner sans aucune modifications. Si vous voulez démarrer rapidement, vous pouvez passer directement à la section <a href="#lancer-docker-compose.yml">Lancer docker-compose.yml</a>.</p><p>Mais vous pouvez, si vous le souhaitez, faire quelques changements pour ajuster l'installation à votre configuration personnelle :</p><h4 id="port" tabindex="-1"><a class="header-anchor" href="#port" aria-label="Anchor"></a> Port</h4><p>Vous pouvez changer le port utilisé par Photoview avec la variable : <code>services.photoview.ports</code>. Par défaut, la valeur est <code>8000:80</code>, cela signigie que le port <code>80</code> à l'intérieur du container est mappé sur le port <code>8000</code> de la machine hôte. Par exemple, si vous souhaitez que votre instance tourne sur le port <code>1234</code>, changez la valeur pour mettre <code>1234:80</code>. Remarquez que le port à l'intérieur du container, <code>80</code>, correspond à la valeur de <code>PHOTOVIEW_LISTEN_PORT=80</code> dans <code>services.photoview.environment</code>.</p><h4 id="variables-d'environment" tabindex="-1"><a class="header-anchor" href="#variables-d'environment" aria-label="Anchor"></a> Variables d'environment</h4><p>Dans <code>services.photoview.environment</code>, plusieurs variables sont définies pour configurer différentes parties de Photoview. Pour une description détaillée de toutes les variables d'environnement, voir la page : <a href="/fr/docs/installation-environment-variables/">Variables d'environnement</a>.</p><p>Pour utiliser la fonctionnalité <code>Lieux</code> avec les photos qui s'affichent sur la carte du Monde, vous devez configurer la variable <code>MAPBOX_TOKEN</code>. Pour générer un token, il vous faut créer un compte gratuit sur <a href="https://account.mapbox.com/access-tokens/">le site Mapbox</a>.</p><h4 id="volumes" tabindex="-1"><a class="header-anchor" href="#volumes" aria-label="Anchor"></a> Volumes</h4><p>Pour que Photoview trouve vos médias, vos fichiers doivent être montés sur un volume à l'intérieur du container de Photoview avec un ou plusieurs <a href="https://docs.docker.com/storage/bind-mounts/">bind mounts</a>. Ceci est configuré dans <code>services.photoview.volumes</code> dans le fichier <code>docker-compose.yml</code>.</p><p>Par défaut, le point de montage unique est : <code>./photos_path:/photos:ro</code>.</p><p>Cette ligne est interprétée comme <code>&lt;HOST_PATH&gt;:&lt;CONTAINER_PATH&gt;:ro</code>, cela signifie que <code>&lt;HOST_PATH&gt;</code> sur votre machine sera accessible sous <code>&lt;CONTAINER_PATH&gt;</code> à l'intérieur du container Photoview. Par la suite, lorsque vous configurerez le chemin des fichiers sur l'interface de Photoview, vous mettrez le chemin défini sous <code>&lt;CONTAINER_PATH&gt;</code>.</p><p>Le <code>:ro</code> à la fin signifie que les fichiers seront montés en lecteur seule (<code>read-only</code>) et qu'il sera bien impossible pour Photoview de modifier vos fichiers. Ceci est optionnel, mais recommandé pour accroitre la sécurité de vos données.</p><p>Vous pouvez ajouter autant de points de montage que vous voulez. Par exemple, si vos médias sont stockés dans le répertoire <code>Pictures</code> de votre répertoire utilisateur de votre ordinateur, vous pourriez mettre : <code>/home/ben/Pictures:/bens_pictures</code>. A l'intérieur du container, le dossier des médias sera donc accessible sur <code>/bens_pictures</code>.</p><h3 id="lancer-docker-compose.yml" tabindex="-1"><a class="header-anchor" href="#lancer-docker-compose.yml" aria-label="Anchor"></a> Lancer docker-compose.yml</h3><p>Pour démarrer les containers Docker déclarés dans le fichier <code>docker-compose.yml</code> executez la commande suivante :</p><pre class="language-shell"><code class="language-shell">$ docker-compose up -d</code></pre><p>Cela démarrera les containers, l'option <code>-d</code> signifie que cela est fait en tâche de fond (en background). Une fois que le système a démarré, vous pouvez accéder à l'application sur <code>http://localhost:8000</code>, à moins que vous n'ayez changé le port bien sûr.</p><p>Ci-dessous quelques commandes utiles avec Docker Compose.</p><pre class="language-shell"><code class="language-shell">$ docker-compose down <span class="token comment"># stop the containers</span><br>$ docker-compose logs <span class="token comment"># show the logs of the containers</span><br>$ docker-compose <span class="token function">ps</span>   <span class="token comment"># show status of the running containers</span></code></pre><h2 id="docker-tags-et-versioning" tabindex="-1"><a class="header-anchor" href="#docker-tags-et-versioning" aria-label="Anchor"></a> Docker tags et versioning</h2><p>Avec Docker, la version de Photoview peut être spécifiée en utilisant un tag. Vous pouvez utiliser les tags suivants :</p><ul><li><code>latest</code>, pour utiliser la dernière release.</li><li><code>edge</code>, cela correspond à la branche <code>master</code> et peut donc contenir des fonctionnalités non terminées. Il n'est donc pas conseillé de l'utiliser en production.</li></ul><p>En plus de ces tags, vous pouvez également utiliser une version spécifique. Pour cela, utilisez le formalisme suivant : <code>x.y.z</code> (ex : <code>2.3.12</code>) ou <code>x.y</code> (ex : <code>2.3</code>) ou <code>x</code> (ex <code>2</code>), avec :</p><ul><li><code>x</code> est la version majeure, chaque version majeure n'est en général pas compatible avec la précédente.</li><li><code>y</code> est la version mineure, chaque version mineure inclut des fonctionnalités et des changements majeurs mais conserve la compatibilité.</li><li><code>z</code> est une version patch, un patch inclut uniquement des améliorations mineures et des résolutions de bugs.</li></ul><p>Si vous spécifiez une version complète, par exemple <code>2.3.12</code>, alors cela correspond à cette release spécifique et l'image ne changera pas. Mais si vous choisissez <code>2.3</code> par exemple, alors cela correspond au dernier patch <code>2.3.z</code>, donc si une version patch suivante est publiée, votre version <code>2.3</code> sera mise à jour. Enfin, <code>2</code> permet d'obtenir la dernière version majeure à jour.</p><p>C'est recommandé d'utiliser version <code>2</code> dans la plupart des cas, ce qui vous permettra d'avoir toujours la dernière version à jour, tout en vous garantissant une compatibilité et donc aucun breaking change lors des mises à jour.</p><h2 id="mise-%C3%A0-jour" tabindex="-1"><a class="header-anchor" href="#mise-%C3%A0-jour" aria-label="Anchor"></a> Mise à jour</h2><p>Pour mettre à jour Photoview dans un environnement docker-compose, utilisez simplement les commandes suivantes :</p><pre class="language-bash"><code class="language-bash">$ docker-compose pull    <span class="token comment"># Pull the latest images</span><br>$ docker-compose up -d   <span class="token comment"># Restart and update the containers whose images has changed</span></code></pre></main></div></div><div id="search-overlay" class="hidden"><div id="search-dimmer" class="fixed top-0 left-0 w-full h-full bg-black opacity-10"></div><div class="fixed top-20 left-1/2 transform -translate-x-1/2 bg-white shadow-lg border border-gray-200 rounded-md p-4 w-40rem overflow-y-auto h-3/4" role="dialog"><input id="search-field" type="search" class="mb-4 w-full py-2 px-3 text-sm border border-gray-200 rounded-md" placeholder="Search" aria-autocomplete="list" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" enterkeyhint="search" aria-controls="search-results-box"><div role="listbox" aria-label="Search" id="search-results-box" class="">Loading results...</div></div></div><script defer="defer" src="/docs/docs-scripts.js"></script></body></html>